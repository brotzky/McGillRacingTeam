<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>McGill FSAE Racing</title>
        <link rel="stylesheet" href="style.css" type="text/css">
        <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
        <script src="https://cdn.firebase.com/js/simple-login/1.6.4/firebase-simple-login.js"></script>
        <script type="text/javascript">
         var myDataRef = new Firebase('https://torrid-fire-7257.firebaseio.com');
          var authData = myDataRef.getAuth();
          if (!authData) {
            window.location = "/amchart/index.html";
          }
        </script>
    </head>
    <body>
        <button class="logoutButton">Log Out</button>
        <br>
        <br>
        <br>
        <select name="select" class="selectInput">
          <option value="value1" selected>Select a date</option>
          <option value="data.json">June 20th 2015</option>
        </select>
        <br>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="http://www.amcharts.com/lib/3/amcharts.js"></script>
        <script src="http://www.amcharts.com/lib/3/serial.js"></script>
        <script src="http://www.amcharts.com/lib/3/plugins/dataloader/dataloader.min.js"></script>
        <script type="text/javascript">
         var myDataRef = new Firebase('https://torrid-fire-7257.firebaseio.com');
        $('button').on('click', function(){
           myDataRef.unauth();
           var authData = myDataRef.getAuth();
           if (authData) {
           } else {
             window.location = "/amchart/index.html";
           }
        });
        // myDataRef.createUser({
        //   email    : "fsae@mail.mcgill.ca",
        //   password : "mrt16"
        // }, function(error, userData) {
        //   if (error) {
        //     console.log("Error creating user:", error);
        //   } else {
        //     console.log("Successfully created user account with uid:", userData.uid);
        //   }
        // });

        $(".selectInput").change(function (){
            var inputData = $(this).val();

              for (i = 0; i < 24; i++) {
                temp = document.createElement('div');
                temp.id = 'chartdiv'+[i];
                temp.innerHTML = temp.id;
                temp.style.height = "500px";
                document.getElementsByTagName('body')[0].appendChild(temp);

                var divID = temp.id.toString();
                console.log(divID);

                    var chart = AmCharts.makeChart(divID, {
                      "type": "serial",
                      "theme": "dark",
                      "dataDateFormat": "HH:NN:SS",
                      "marginRight": 50,
                      "autoMarginOffset": 50,
                      "dataLoader": {
                          "url": inputData,
                          "format": "json"
                        },
                      "balloon": {
                        "cornerRadius": 6
                      },
                      "valueAxes": [{
                        "axisAlpha": 0
                      }],
                      "graphs": [{
                        "balloonText": "[[lapTimeOfDay]]<br><b><span style='font-size:14px;'>[[value]] sec</span></b>",
                        "bullet": "round",
                        "bulletSize": 6,
                        "connect": false,
                        "gapPeriod": 60,
                        "lineColor": "#ed5153",
                        "lineThickness": 2,
                        "negativeLineColor": "#487dac",
                        "valueField": "lapTime"
                      }],
                      "chartCursor": {
                        "categoryBalloonDateFormat": "YYYY",
                        "cursorAlpha": 0.1,
                        "cursorColor": "#000000",
                        "fullWidth": true,
                        "graphBulletSize": 2
                      },
                      "chartScrollbar": {},
                      "categoryField": "lapTimeOfDay",
                      "categoryAxis": {
                        "minPeriod": "ss",
                        "parseDates": true,
                        "minorGridEnabled": true
                      },
                      "export": {
                        "enabled": true
                      }
                    });
              }
            });
        </script>
      </body>
</html>
